##
## Pasos para construir las imagenes DockerHub
param:
  serviceDockerHub: "" # defaults for any parameters that aren't specified
  repository: ""
  vmImage: ""
  dockerfile: ""
  buildContext: ""
  tags: ""

steps:
  - task: Docker@2
    displayName: Login to DockerHub
    inputs:
      command: login
      containerRegistry: ${{ param.serviceDockerHub }}
  - task: Docker@2
    displayName: Build and Push
    inputs:
      command: buildAndPush
      repository: ${{ param.repository }} # wallaskrea/alpinemini
      buildContext: ${{ param.buildContext }}
      Dockerfile: ${{ param.dockerfile }} # $(Build.SourcesDirectory)/Alpine/Dockerfile.AlpineMini
      tags: |
        $(tags)
  - task: Docker@2
    displayName: Logout of DockerHub
    inputs:
      containerRegistry: ${{ param.serviceDockerHub }}
      command: "logout"
